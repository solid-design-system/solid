{"version":3,"file":"library-7f5d43fd.js","sources":["../../../src/components/icon/library.ts"],"sourcesContent":["import systemLibrary from './library.system';\nimport type SdIcon from '../icon/icon';\n\nexport type IconLibraryResolver = (name: string) => string;\nexport type IconLibraryMutator = (svg: SVGElement) => void;\nexport interface IconLibrary {\n  name: string;\n  resolver: IconLibraryResolver;\n  mutator?: IconLibraryMutator;\n}\n\nlet registry: IconLibrary[] = [systemLibrary];\nlet watchedIcons: SdIcon[] = [];\n\n/** Adds an icon to the list of watched icons. */\nexport function watchIcon(icon: SdIcon) {\n  watchedIcons.push(icon);\n}\n\n/** Removes an icon from the list of watched icons. */\nexport function unwatchIcon(icon: SdIcon) {\n  watchedIcons = watchedIcons.filter(el => el !== icon);\n}\n\n/** Returns a library from the registry. */\nexport function getIconLibrary(name?: string) {\n  return registry.find(lib => lib.name === name);\n}\n\n/** Adds an icon library to the registry, or overrides an existing one. */\nexport function registerIconLibrary(\n  name: string,\n  options: { resolver: IconLibraryResolver; mutator?: IconLibraryMutator }\n) {\n  unregisterIconLibrary(name);\n  registry.push({\n    name,\n    resolver: options.resolver,\n    mutator: options.mutator\n  });\n\n  // Redraw watched icons\n  watchedIcons.forEach(icon => {\n    if (icon.library === name) {\n      icon.setIcon();\n    }\n  });\n}\n\n/** Removes an icon library from the registry. */\nexport function unregisterIconLibrary(name: string) {\n  registry = registry.filter(lib => lib.name !== name);\n}\n"],"names":["registry","systemLibrary","watchedIcons","watchIcon","icon","unwatchIcon","el","getIconLibrary","name","lib","registerIconLibrary","options","unregisterIconLibrary"],"mappings":"4CAWA,IAAIA,EAA0B,CAACC,CAAa,EACxCC,EAAyB,CAAA,EAGtB,SAASC,EAAUC,EAAc,CACtCF,EAAa,KAAKE,CAAI,CACxB,CAGO,SAASC,EAAYD,EAAc,CACxCF,EAAeA,EAAa,OAAaI,GAAAA,IAAOF,CAAI,CACtD,CAGO,SAASG,EAAeC,EAAe,CAC5C,OAAOR,EAAS,KAAYS,GAAAA,EAAI,OAASD,CAAI,CAC/C,CAGgB,SAAAE,EACdF,EACAG,EACA,CACAC,EAAsBJ,CAAI,EAC1BR,EAAS,KAAK,CACZ,KAAAQ,EACA,SAAUG,EAAQ,SAClB,QAASA,EAAQ,OAAA,CAClB,EAGDT,EAAa,QAAgBE,GAAA,CACvBA,EAAK,UAAYI,GACnBJ,EAAK,QAAQ,CACf,CACD,CACH,CAGO,SAASQ,EAAsBJ,EAAc,CAClDR,EAAWA,EAAS,OAAcS,GAAAA,EAAI,OAASD,CAAI,CACrD"}