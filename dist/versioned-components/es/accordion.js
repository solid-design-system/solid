import"./icon.js";import{x as e,i as t}from"./lit-element.js";import{S as o,n as i,e as s}from"./solid-element.js";import{i as n}from"./query.js";import{L as r}from"./localize.js";import{w as a}from"./watch.js";import{t as d}from"./classix.js";import"./state.js";import"./library.js";import"./library.system.js";import"./request.js";import"./request2.js";import"./component.styles.js";function h(e,t,o){return new Promise((i=>{if((null==o?void 0:o.duration)===1/0)throw new Error("Promise-based animations must be finite.");const s=e.animate(t,{...o,duration:window.matchMedia("(prefers-reduced-motion: reduce)").matches?0:o.duration});s.addEventListener("cancel",i,{once:!0}),s.addEventListener("finish",i,{once:!0})}))}function c(e){return Promise.all(e.getAnimations().map((e=>new Promise((t=>{const o=requestAnimationFrame(t);e.addEventListener("cancel",(()=>o),{once:!0}),e.addEventListener("finish",(()=>o),{once:!0}),e.cancel()})))))}function l(e,t){return e.map((e=>({...e,height:"auto"===e.height?`${t}px`:e.height})))}const p=new Map,m=new WeakMap;function u(e,t){return"rtl"===t.toLowerCase()?{keyframes:e.rtlKeyframes||e.keyframes,options:e.options}:e}function y(e,t){p.set(e,function(e){return e??{keyframes:[],options:{duration:0}}}(t))}function f(e,t,o){const i=m.get(e);if(null!=i&&i[t])return u(i[t],o.dir);const s=p.get(t);return s?u(s,o.dir):{keyframes:[],options:{duration:0}}}function w(e,t){return new Promise((o=>{e.addEventListener(t,(function i(s){s.target===e&&(e.removeEventListener(t,i),o())}))}))}var b=Object.defineProperty,g=Object.getOwnPropertyDescriptor,v=(e,t,o,i)=>{for(var s,n=i>1?void 0:i?g(t,o):t,r=e.length-1;r>=0;r--)(s=e[r])&&(n=(i?s(t,o,n):s(n))||n);return i&&n&&b(t,o,n),n};let k=class extends o{constructor(){super(...arguments),this.localize=new r(this),this.open=!1}firstUpdated(){this.body.hidden=!this.open,this.body.style.height=this.open?"auto":"0"}handleSummaryClick(){this.header.focus(),this.open?this.hide():this.show()}handleSummaryKeyDown(e){("Enter"===e.key||" "===e.key)&&(e.preventDefault(),this.open?this.hide():this.show()),("ArrowUp"===e.key||"ArrowLeft"===e.key)&&(e.preventDefault(),this.hide()),("ArrowDown"===e.key||"ArrowRight"===e.key)&&(e.preventDefault(),this.show())}async handleOpenChange(){if(this.open){if(this.emit("sd-show",{cancelable:!0}).defaultPrevented)return void(this.open=!1);await c(this.body),this.body.hidden=!1;const{keyframes:e,options:t}=f(this,"accordion.show",{dir:this.localize.dir()});await h(this.body,l(e,this.body.scrollHeight),t),this.body.style.height="auto",this.emit("sd-after-show")}else{if(this.emit("sd-hide",{cancelable:!0}).defaultPrevented)return void(this.open=!0);await c(this.body);const{keyframes:e,options:t}=f(this,"accordion.hide",{dir:this.localize.dir()});await h(this.body,l(e,this.body.scrollHeight),t),this.body.hidden=!0,this.body.style.height="auto",this.emit("sd-after-hide")}}async show(){if(!this.open)return this.open=!0,w(this,"sd-after-show")}async hide(){if(this.open)return this.open=!1,w(this,"sd-after-hide")}render(){return e`<div part="base" class="border border-neutral-400"><header part="header" id="header" class="${d("flex text-base gap-4 font-bold items-center cursor-pointer select-none px-4 py-3 focus:focus-outline",this.open?"bg-white text-accent hover:bg-neutral-200":"text-primary bg-neutral-100 hover:bg-neutral-200")}" role="button" aria-expanded="${this.open?"true":"false"}" aria-controls="content" @click="${this.handleSummaryClick}" @keydown="${this.handleSummaryKeyDown}"><slot name="summary" part="summary" class="flex flex-auto items-center">${this.summary}</slot><span part="summary-icon" class="${d("flex flex-grow-0 flex-shrink-0 flex-auto items-center transition-all ease-in-out duration-300",this.open&&"rotate-180")}"><slot name="expand-icon" class="${d(this.open&&"hidden")}"><sd-1-2-5-icon library="system" name="chevron-down"></sd-1-2-5-icon></slot><slot name="collapse-icon" class="${d(!this.open&&"hidden")}"><sd-1-2-5-icon library="system" name="chevron-down"></sd-1-2-5-icon></slot></span></header><div part="content" id="content" class="overflow-hidden"><slot class="block px-4 py-6" role="region" aria-labelledby="header"></slot></div></div>`}};k.styles=[o.styles,t`:host{display:block}`],v([n('[part="base"]')],k.prototype,"accordion",2),v([n('[part="header"]')],k.prototype,"header",2),v([n('[part="content"]')],k.prototype,"body",2),v([i({type:Boolean,reflect:!0})],k.prototype,"open",2),v([i()],k.prototype,"summary",2),v([a("open",{waitUntilFirstUpdate:!0})],k.prototype,"handleOpenChange",1),k=v([s("sd-1-2-5-accordion")],k),y("accordion.show",{keyframes:[{height:"0",opacity:"0"},{height:"auto",opacity:"1"}],options:{duration:300,easing:"ease"}}),y("accordion.hide",{keyframes:[{height:"auto",opacity:"1"},{height:"0",opacity:"0"}],options:{duration:300,easing:"ease"}});export{k as default};