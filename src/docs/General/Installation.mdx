import { Source, Markdown } from '@storybook/blocks';
export const cdnBase = 'https://solid-design-system.union-investment.com';
import { version } from '../../../package.json';

# Installation

## CDN Installation

### UMD

The UMD bundle registers all Solid Components in a single file. If you're using many Solid Components, this is the most performant way to load and hydrate them.
You can use the following script tag to load all components:

<Source
  language="html"
  code={`<script src="${cdnBase}/${version}/components/umd/solid-components.js" type="module"></script>`}
/>

### ES modules

The ES modules bundle is a collection of all Solid Components as ES modules.
This allows you to cherry pick the components you want to use and load them asynchronously.

<Source language="html" code={`<script src="${cdnBase}/${version}/components/es/button.js" type="module"></script>`} />

This approach will load only the components you need up front, while limiting the number of files the browser has to download.
The disadvantage is that you need to import each individual component.
While you could load the whole bundle as well (`../es/solid-components.js`), we recommend using the `UMD` bundle instead, as it hydrates and loads components much faster.

> Important: You should only use either UMD or ES modules on a single website, not both, as this could lead to collisions in the custom element registry.

### Fixed vs. flexible version

As shown above you can select a fixed version of the components by setting the version in the URL. For example, to use the current version ({version}), you would use the following URL:

<Source language="html" code={`<script src="${cdnBase}/${version}/components/es/button.js" type="module"></script>`} />

This project adheres to [Semantic Versioning](http://semver.org/).

1. If you want to receive bug fixes for you current version, you can use the wildcard patch version selector: <Markdown>{`\`${version.split('.')[0]}.${version.split('.')[1]}.x\``}</Markdown>
2. If you want to receive new features, you can use the wildcard minor version selector: <Markdown>{`\`${version.split('.')[0]}.x.x\``}</Markdown>
3. If you want to receive even breaking changes by using the latest version, you can use the wildcard major version selector: <Markdown>{`\`x.x.x\``}</Markdown>

> Important: In production environments you should always use a fixed version, as otherwise you could receive breaking changes without noticing. Using a more flexible version is only recommended for development environments and at own risk.

## Versioned Components

In microfrontends it is often necessary to use different versions of the same component.
For example, if you have two microfrontends, one using `1.0.0` and the other using `1.1.0`, you can't use the same bundle for both, as this would lead to collisions in the custom element registry.

Instead to use versioned components in your projects, follow these steps:

1. Modify the CDN URL from `../components/es/solid-components.js` to `../versioned-components/es/solid-components.js`. You can still cherry-pick the components you want to use, for example, `../versioned-components/es/button.js`.
2. Update the tags of your components to include their version, such as `sd-1-1-0-button` instead of `sd-button`.

> Info: We can only allow one bundle for versioned components as otherwise custom-element-registries could collide. We decided to go with only ES modules, as this allows to cherry pick single components, what could help in micro service contexts.

Keep the following in mind for nested components:

- _Slotted components_, which are added by your app or website, are not automatically versioned. You need to version them yourself if necessary.
- _Nested components_, which are generated by the component itself, are automatically versioned (e.g., `sd-1-1-0-button` will generate an `sd-1-1-0-spinner` when in the loading state).
