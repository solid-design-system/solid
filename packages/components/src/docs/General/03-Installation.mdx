import { Source, Markdown, Meta } from '@storybook/blocks';
export const cdnBase = 'https://solid-design-system.fe.union-investment.de';
import { version } from '../../../package.json';

<Meta title="Docs/General/Installation" />

# Installation

## Styles

### Versioned vs. unversioned styles

You can choose between versioned and unversioned styles.

```html
<!-- unversioned -->
<span class="sd-meta">Solid Design System</span>
```

```html
<!-- versioned -->
<span class="sd-1-1-0-meta">Solid Design System</span>
```

While versioning web components is always recommended in microfrontends, versioning styles might be less important.

### npm

The styles are part of the `@solid-design-system/components` package.

```shell
npm install @solid-design-system/components
```

```js
// unversioned
import '@solid-design-system/unversioned-styles';

// versioned
import '@solid-design-system/versioned-styles';
```

### CDN

If you want to use versioned styles, you need to include the version in the URL. Check out the [Select a version](#select-a-version) section for more information how to select specific versions.

<Source language="html" code={`<!-- unversioned e. g. <span class="sd-meta">...</span> -->
<link rel="stylesheet" href="${cdnBase}/${version}/styles/solid-styles.css" />`}
/>

<Source language="html" code={`<!-- versioned e. g. <span class="sd-1-1-0-meta">...</span> -->
<link rel="stylesheet" href="${cdnBase}/${version}/versioned-styles/solid-styles.css" />`}
/>

## Components

### Versioned vs. unversioned components

When using web components from Solid Design System in microfrontends, versioned components are always recommended. Including version numbers in component names provides more control over updates and prevents collisions when different versions of the same component are used simultaneously.

```html
<!-- unversioned -->
<sd-button></sd-button>
```

```html
<!-- versioned -->
<sd-1-1-0-button></sd-1-1-0-button>
```

Keep the following in mind for nested components:

- _Slotted components_, which are added by your app or website, are not automatically versioned. You need to version them yourself if necessary.
- _Nested components_, which are generated by the component itself, are automatically versioned (e.g., `sd-1-1-0-button` will generate an `sd-1-1-0-spinner` when in the loading state).

### npm

```shell
npm install @solid-design-system/components
```

In your project, you can import either the entire library or specific components.
Importing specific components creates a smaller bundle, enhancing load times and is therefore prefered.

```js
// unversioned e. g. <sd-button>
import '@solid-design-system/components/unversioned'; // whole library
import '@solid-design-system/components/unversioned/button/button'; // specific component
import '@solid-design-system/components/dist/package/components/button/button'; // specific component in a Stencil / Webpack setup
```

```js
// versioned e. g. <sd-1-1-0-button>
import '@solid-design-system/components/versioned'; // whole library
import '@solid-design-system/components/versioned/button/button'; // specific component
import '@solid-design-system/components/dist/versioned-package/components/button/button'; // specific component in a Stencil / Webpack setup
```

### CDN

#### UMD

The UMD bundle registers all Solid Components in a single file. If you're using many Solid Components, this is the most performant way to load and hydrate them.
You can use the following script tag to load all components:

<Source
  language="html"
  code={`<!-- unversioned e. g. <sd-button> -->
<script src="${cdnBase}/${version}/components/umd/solid-components.js" type="module"></script>`}
/>

We don't provide the possibility to use versioned components with the UMD bundle, as this could lead to collisions in the custom element registry when versioning components.

#### ES modules

The ES modules bundle is a collection of all Solid Components as ES modules.
This allows you to cherry pick the components you want to use and load them asynchronously.

<Source language="html" code={`<!-- unversioned e. g. <sd-button> -->
<script src="${cdnBase}/${version}/components/es/button.js" type="module"></script>`}
/>

<Source language="html" code={`<!-- versioned e. g. <sd-1-1-0-button> -->
<script src="${cdnBase}/${version}/versioned-components/es/button.js" type="module"></script>`}
/>

This approach will load only the components you need up front, while limiting the number of files the browser has to download.
The disadvantage is that you need to import each individual component.
While you could load the whole bundle as well (`../es/solid-components.js`), we recommend using the `UMD` bundle in that case, as it hydrates and loads components much faster.

> Important: You should only use either UMD or ES modules on a single website or load the UMD build first, as this otherwise could lead to collisions in the custom element registry.

#### Select a version

As shown above you can select a fixed version of the components by setting the version in the URL. For example, to use the current version ({version}), you would use the following URL:

<Source language="html" code={`<!-- unversioned e. g. <sd-button> -->
<script src="${cdnBase}/${version}/components/es/button.js" type="module"></script>`} />

<Source language="html" code={`<!-- versioned e. g. <sd-1-1-0-button> -->
<script src="${cdnBase}/${version}/versioned-components/es/button.js" type="module"></script>`} />

This project adheres to [Semantic Versioning](http://semver.org/).

1. If you want to receive bug fixes for you current version, you can use the wildcard patch version selector: <Markdown>{`\`${version.split('.')[0]}.${version.split('.')[1]}.x\``}</Markdown>
2. If you want to receive new features, you can use the wildcard minor version selector: <Markdown>{`\`${version.split('.')[0]}.x.x\``}</Markdown>
3. If you want to receive even breaking changes by using the latest version, you can use the wildcard major version selector: <Markdown>{`\`x.x.x\``}</Markdown>

> Important: In production environments you should always use a fixed version, as otherwise you could receive breaking changes without noticing. Using a more flexible version is only recommended for development environments and at own risk.
